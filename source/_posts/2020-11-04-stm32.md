---
title: STM32开发环境搭建-Linux篇
categories: tutorials
layout: post
---

# 配置CLion用于STM32开发-Linux篇

> https://zhuanlan.zhihu.com/p/145801160

我的系统：`5.8.16-2-MANJARO`

## 安装步骤

### CLion

装呗

### CubeMX

```bash
# 配置java
sudo pacman -S jre-openjdk
# 下载cubemx 安装
# https://www.st.com/en/development-tools/stm32cubemx.html#get-software
```

### 交叉编译器 gnu-arm-none-eabi

> https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads

```bash
# 解压下来放到要一个目录
# 添加环境变量
sudo vim /etc/profile

export PATH="${PATH}:/path/to/your/file/bin"
# 测试
arm-none-eabi-gcc -v
```

### ST-link 驱动

```bash
git clone https://github.com/texane/stlink.git
cd stlink/
./autogen.sh
./configure
make && sudo make install
```

### Openocd

包管理器里应该有

## CLion配置

### Toolchains & cmake

打开`File-Settings-Build,Execution,Deployment`选项卡，在`Toolchains`下面添加一个stm32环境：

![image-20201104172457131](https://www.player7.cc:44343/uploads/big/69e7666f5a1354283fd475312aff9850.png)

检查cmake中的toolchain：

![image-20201104174515522](https://www.player7.cc:44343/uploads/big/7c05ebf65f81f4f160339ef7d31b4459.png)

### 创建烧录配置

![image-20201104174637041](https://www.player7.cc:44343/uploads/big/4219ee2080acf835e1f327baa7474492.png)

配置如下：

![image-20201104174832861](https://www.player7.cc:44343/uploads/big/510b7b188b1dd4eda4186a16d8a73eeb.png)

接下来点击`run`就可以烧录了。